{
  "builders": [
  {
    "type": "qemu",
    "accelerator": "kvm",
    "iso_url": "vyos-rolling-latest.iso",
    "iso_checksum_type": "none",
    "output_directory": "output-vyos-rolling-amd64-{{isotime `2000-01-01`}}",
    "vm_name": "packer-vyos-{{isotime `2000-01-01`}}",
    "disk_size": "20000",
    "headless": "true",
    "boot_wait": "60s",
    "boot_command": [
      "<enter><wait10>",
      "vyos<enter><wait>",
      "vyos<enter><wait5>",
      "install image<enter><wait>",
      "Yes<enter><wait5>",
      "Auto<enter><wait>",
      "<enter><wait>",
      "Yes<enter><wait>",
      "<enter><wait10><wait10><wait10>",
      "<enter><wait10><wait10>",
      "<enter><wait5>",
      "vagrant<enter><wait>",
      "vagrant<enter><wait>",
      "<enter><wait5>",
      "reboot<enter><wait>",
      "Yes<enter><wait10><wait10><wait10><wait10><wait10><wait10>",
      "<enter><wait>",
      "vyos<enter><wait>",
      "vagrant<enter><wait5>",
      "configure<enter><wait>",
      "set interfaces ethernet eth0 address dhcp<enter><wait>",
      "set interfaces ethernet eth0 description 'Out-Of-Band'<enter><wait>",
      "set interfaces ethernet eth0 vrf 'management'<enter><wait>",
      "set service ssh vrf 'management'<enter><wait>",
      "set system host-name 'vyos-vagrant'<enter><wait>",
      "set system login user vagrant authentication plaintext-password vagrant<enter><wait>",
      "set system login user vagrant authentication public-keys vagrant key 'AAAAB3NzaC1yc2EAAAABIwAAAQEA6NF8iallvQVp22WDkTkyrtvp9eWW6A8YVr+kz4TjGYe7gHzIw+niNltGEFHzD8+v1I2YJ6oXevct1YeS0o9HZyN1Q9qgCgzUFtdOKLv6IedplqoPkcmF0aYet2PkEDo3MlTBckFXPITAMzF8dJSIFo9D8HfdOV0IAdx4O7PtixWKn5y2hMNG0zQPyUecp4pzC6kivAIhyfHilFR61RGL+GPXQ2MWZWFYbAGjyiYJnAmCP3NOTd0jMZEnDkbUvxhMmBYSdETk1rRgm+R4LOzFUGaHqHDLKLX+FIPKcF96hrucXzcWyLbIbEgE98OHlnVYCzRdK8jlqm8tehUc9c9WhQ=='<enter><wait>",
      "set system login user vagrant authentication public-keys vagrant type 'ssh-rsa'<enter><wait>",
      "set vrf name management table '65530'<enter><wait>",
      "<wait>",
      "delete interfaces ethernet eth0 hw-id<enter><wait>",
      "<wait>",
      "commit<enter><wait5>",
      "save<enter><wait>",
      "exit<enter><wait>",
      "exit<enter><wait5>"
    ],
    "ssh_timeout": "600s",
    "ssh_username": "vagrant",
    "ssh_password": "vagrant",
    "shutdown_command": "sudo shutdown -h now",
    "use_default_display": "true",
    "qemuargs": [
      ["-m", "1024M"],
      ["-smp", "4"],
      ["-serial", "tcp:127.0.0.1:4444,server,nowait"]
    ]
  }],
  "post-processors": [{
    "type": "vagrant",
    "output": "vyos.box"
  }]
}
